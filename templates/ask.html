<!DOCTYPE html>
<html lang="uk">
    <head>
        <!--<link rel="stylesheet" href="styles.css">-->
        <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
        <meta charset="utf-8">
        <title>
            Опитування
        </title>
    </head>

    <body>

        <h2 class="headtext">ОЦІНІТЬ НАСКІЛЬКИ ВАМ ПОДОБАЄТЬСЯ ЗОБРАЖЕННЯ</h2>
        <hr>
        <form action="/get.php"> 
        
        <!-- Питання1 -->
        <img src = "{{url_for('static', filename='img/img1.bmp')}}">
        <input type="range" id="volume1" name="volume1" min="1" max="5">
        <button id="recordButton1" type="button">Скажіть</button>
        <hr>

        <!-- Питання2 -->
        <img src = "{{url_for('static', filename='img/img2.bmp')}}">
        <input type="range" id="volume2" name="volume2" min="1" max="5">
        <button id="recordButton2" type="button">Скажіть</button>
        <hr>

        <!-- Питання3 -->
        <img src = "{{url_for('static', filename='img/img3.bmp')}}">
        <input type="range" id="volume3" name="volume3" min="1" max="5">
        <button id="recordButton3" type="button">Скажіть</button>
        <hr>

        <!-- Питання4 -->
        <img src = "{{url_for('static', filename='img/img4.bmp')}}">
        <input type="range" id="volume4" name="volume4" min="1" max="5">
        <button id="recordButton4" type="button">Скажіть</button>
        <hr>

        <!-- Питання5 -->
        <img src = "{{url_for('static', filename='img/img5.bmp')}}">
        <input type="range" id="volume5" name="volume5" min="1" max="5">
        <button id="recordButton5" type="button">Скажіть</button>
        <hr>

        <!-- Відправити -->
        <input type="submit" id="submit" name="submit" >
        <hr>
        </form>


        <script>
        const recordButton1 = document.querySelector('#recordButton1');
        const recordButton2 = document.querySelector('#recordButton2');
        const recordButton3 = document.querySelector('#recordButton3');
        const recordButton4 = document.querySelector('#recordButton4');
        const recordButton5 = document.querySelector('#recordButton5');
        let recognizedText = '';
        var xhr = new XMLHttpRequest();

        recordButton1.addEventListener('click', function() {ifButtonClicked(1);});
        recordButton2.addEventListener('click', function() {ifButtonClicked(2);});
        recordButton3.addEventListener('click', function() {ifButtonClicked(3);});
        recordButton4.addEventListener('click', function() {ifButtonClicked(4);});
        recordButton5.addEventListener('click', function() {ifButtonClicked(5);});
        
        function ifButtonClicked(buttonId){
                const recognition = new webkitSpeechRecognition();
                recognition.lang = 'uk-UA'; // set language to Ukrainian
                recognition.onstart = function() {};

                recognition.onresult = function(event) {
                    recognizedText = event.results[0][0].transcript;

                    // check for keywords in recognized text
                    const keywords1 = ['погано', 'поганий', 'погана', 'не красива', 'не красиво', 'некрасива', 'некрасиво', 'некрасивій', 'некрасиву', 'некрасивою', 'некрасиві', 'некрасивих', 'некрасивим', 'некрасивими', 'некрасивій', 'неприваблива', 'непривабливого', 'непривабливій', 'непривабливу', 'непривабливою', 'непривабливі', 'непривабливих', 'непривабливим', 'непривабливими', 'непривабливій', 'незахоплююча', 'незахоплюючого', 'незахоплюючій', 'незахоплюючу', 'незахоплюючою', 'незахоплюючі', 'незахоплюючих', 'незахоплюючим', 'незахоплюючими', 'незахоплюючій', 'нудна', 'нудного', 'нудній', 'нудну', 'нудною', 'нудні', 'нудних', 'нудним', 'нудними', 'нудній', 'відсутність кольору', 'відсутності кольору', 'відсутності кольору', 'відсутність кольору', 'відсутністю кольору', 'відсутності кольору', 'відсутностей кольору', 'відсутностям кольору', 'відсутностями кольору', 'відсутності кольору', 'монотонна', 'монотонного', 'монотонній', 'монотонну', 'монотонною', 'монотонні', 'монотонних', 'монотонним', 'монотонними', 'монотонній', 'безвиразна', 'безвиразного', 'безвиразній', 'безвиразну', 'безвиразною', 'безвиразні', 'безвиразних', 'безвиразним', 'безвиразними', 'безвиразній', 'байдужа', 'байдужого', 'байдужій', 'байдужу', 'байдужою', 'байдужі', 'байдужих', 'байдужим', 'байдужими', 'байдужій', 'втомлююча', 'втомлюючого', 'втомлюючій', 'втомлюючу', 'втомлюючою', 'втомлюючі', 'втомлюючих', 'втомлюючим', 'втомлюючими', 'втомлюючій', 'відсутність деталей', 'відсутності деталей', 'відсутності деталей'];
                    const keywords2 = ['cередня', 'середньої', 'середній', 'середню', 'середньою', 'середні', 'середніх', 'середнім', 'середніми', 'середній', 'проста', 'простої', 'простій', 'просту', 'простою', 'прості', 'простих', 'простим', 'простими', 'простій', 'звичайна', 'звичайної', 'звичайній', 'звичайну', 'звичайною', 'звичайні', 'звичайних', 'звичайним', 'звичайними', 'звичайній', 'скромна', 'скромної', 'скромній', 'скромну', 'скромною', 'скромні', 'скромних', 'скромним', 'скромними', 'скромній', 'непомітна', 'непомітної', 'непомітній', 'непомітну', 'непомітною', 'непомітні', 'непомітних', 'непомітним', 'непомітними', 'непомітній', 'засмучена', 'засмученої', 'засмученій', 'засмучену', 'засмученою', 'засмучені', 'засмучених', 'засмученим', 'засмученими', 'засмученій', 'засмагла', 'засмаглої', 'засмаглій', 'засмаглу', 'засмаглою', 'засмаглі', 'засмаглих', 'засмаглим', 'засмаглими', 'засмаглій', 'млява', 'млявої', 'млявій', 'мляву', 'млявою', 'мляві', 'млявих', 'млявим', 'млявими', 'млявій', 'сіра', 'сірої', 'сірій', 'сіру', 'сірою', 'сірі', 'сірих', 'сірим', 'сірими', 'сірій', 'неприємна', 'неприємної', 'неприємній', 'неприємну', 'неприємною', 'неприємні', 'неприємних', 'неприємним', 'неприємними', 'неприємній.'];
                    const keywords3 = ['цікава', 'цікавої', 'цікавій', 'цікаву', 'цікавою', 'цікаві', 'цікавих', 'цікавим', 'цікавими', 'цікавій', 'хороша', 'хорошої', 'хорошій', 'хорошу', 'хорошею', 'хороші', 'хороших', 'хорошим', 'хорошими', 'хорошій', 'яскрава', 'яскравої', 'яскравій', 'яскраву', 'яскравою', 'яскраві', 'яскравих', 'яскравим', 'яскравими', 'яскравій', 'виразна', 'виразної', 'виразній', 'виразну', 'виразною', 'виразні', 'виразних', 'виразним', 'виразними', 'виразній', 'насичена', 'насиченої', 'насиченій', 'насичену', 'насиченою', 'насичені', 'насичених', 'насиченим', 'насиченими', 'насиченій', 'енергійна', 'енергійної', 'енергійній', 'енергійну', 'енергійною', 'енергійні', 'енергійних', 'енергійним', 'енергійними', 'енергійній', 'сильна', 'сильної', 'сильній', 'сильну', 'сильною', 'сильні', 'сильних', 'сильним', 'сильними', 'сильній', 'загадкова', 'загадкової', 'загадковій', 'загадкову', 'загадковою', 'загадкові', 'загадкових', 'загадковим', 'загадковими', 'загадковій', 'вразлива', 'вразливої', 'вразливій', 'вразливу', 'вразливою', 'вразливі', 'вразливих', 'вразливим', 'вразливими', 'вразливій', 'дивна', 'дивної', 'дивній', 'дивну', 'дивною', 'дивні', 'дивних', 'дивним', 'дивними', 'дивній'];
                    const keywords4 = ['Красива', 'Красивіша', 'Красивіші', 'Красивий', 'Красиво', 'Красивому', 'Красивим', 'Красивому', 'Красиві', 'Красивіші', 'Красивіших', 'Красивими', 'Чудова', 'Чудової', 'Чудовій', 'Чудову', 'Чудовим', 'Чудовому', 'Чудовими', 'Приваблива', 'Привабливої', 'Привабливій', 'Привабливу', 'Привабливим', 'Привабливому', 'Привабливі', 'Привабливіші', 'Привабливіших', 'Привабливими', 'Витончена', 'Витонченої', 'Витонченій', 'Витончену', 'Витонченим', 'Витонченому', 'Витонченими', 'Елегантна', 'Елегантної', 'Елегантній', 'Елегантну', 'Елегантним', 'Елегантному', 'Елегантними', 'Шикарна', 'Шикарної', 'Шикарній', 'Шикарну', 'Шикарним', 'Шикарному', 'Шикарними', 'Незвична', 'Незвичайна', 'Незвичайній', 'Незвичайну', 'Незвичайним', 'Незвичайному', 'Незвичайними', 'Таємнича', 'Таємничої', 'Таємничій', 'Таємничу', 'Таємничим', 'Таємничому', 'Таємничими', 'Розкішна', 'Розкішної', 'Розкішній', 'Розкішну', 'Розкішним', 'Розкішному', 'Розкішними', 'Незабутня', 'Незабутньої', 'Незабутній', 'Незабутню', 'Незабутнім', 'Незабутньому', 'Незабутніми'];
                    const keywords5 = ['Вражаюча', 'неперевершена', 'неймовірна', 'божественна', 'бездоганна', 'фантастична', 'хвилююча', 'магічна', 'феноменальна', 'неземна'];
                    

                    if (keywords1.some(keyword => recognizedText.toLowerCase().includes(keyword.toLowerCase()))) {
                        // execute code for keywords1
                        alert(`Ви сказали: ${recognizedText}`);
                        document.getElementById('volume'+buttonId).value=1;
                    } else if (keywords2.some(keyword => recognizedText.toLowerCase().includes(keyword.toLowerCase()))) {
                        // execute code for keywords2
                        alert(`Ви сказали: ${recognizedText}`);
                        document.getElementById('volume'+buttonId).value=2;
                    } else if (keywords3.some(keyword => recognizedText.toLowerCase().includes(keyword.toLowerCase()))) {
                        // execute code for keywords3
                        alert(`Ви сказали: ${recognizedText}`);
                        document.getElementById('volume'+buttonId).value=3;
                    } else if (keywords4.some(keyword => recognizedText.toLowerCase().includes(keyword.toLowerCase()))) {
                        // execute code for keywords4
                        alert(`Ви сказали: ${recognizedText}`);
                        document.getElementById('volume'+buttonId).value=4;
                    } else if (keywords5.some(keyword => recognizedText.toLowerCase().includes(keyword.toLowerCase()))) {
                        // execute code for keywords5
                        alert(`Ви сказали: ${recognizedText}`);
                        document.getElementById('volume'+buttonId).value=5;
                    } else {
                        alert(`Ви сказали: ${recognizedText}`);
                        alert("Помилка, повторіть");
                    }
                };
                recognition.onend = function() {

                };
                recognition.start();
            }

        </script>   
    </body>
</html>